<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>DeepForge AI Login</title>
<link rel="stylesheet" href="style.css">
<link rel="manifest" href="manifest.json">
<link rel="icon" href="favicon.svg">
</head>
<body>
<div class="login-container">
  <div class="login-card">
    <img src="logo.svg" alt="DeepForge AI Logo" class="logo">
    <h1>DeepForge AI</h1>
    <p>Login with Google to start generating vehicles, microcontrollers, and Lua scripts!</p>
    <button id="googleLoginBtn" aria-label="Login with Google">Login with Google</button>
  </div>
</div>

<script type="module">
import { auth, googleProvider } from "./config.js";

document.getElementById("googleLoginBtn").addEventListener("click", () => {
    auth.signInWithPopup(googleProvider)
        .then(result => {
            const user = result.user;
            localStorage.setItem("df_user", JSON.stringify({ uid: user.uid, name: user.displayName }));
            window.location.href = "dashboard.html";
        })
        .catch(err => alert("Login failed: " + err.message));
});

if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('/sw.js')
    .then(() => console.log('Service Worker registered'))
    .catch(err => console.error('SW registration failed:', err));
}

</script>
</body>
</html>
